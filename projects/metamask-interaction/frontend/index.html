<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>MetaMask ì—°ë™ + í† í° ì „ì†¡ í…ŒìŠ¤íŠ¸</title>
</head>
<body>
  <h2>ğŸ¦Š MetaMask ì—°ë™ í…ŒìŠ¤íŠ¸</h2>
  <button id="connectBtn">ğŸ”Œ ì§€ê°‘ ì—°ê²°</button>
  <p id="accountDisplay"></p>

  <hr />

  <h3>ğŸš€ transfer</h3>
  <input type="text" id="transferTo" placeholder="ë°›ëŠ” ì£¼ì†Œ" />
  <input type="number" id="transferAmount" placeholder="ìˆ˜ëŸ‰" />
  <button id="transferBtn">ì „ì†¡</button>

  <h3>ğŸ›‚ approve + transferFrom</h3>
  <input type="text" id="approveTo" placeholder="ë³´ë‚¼ ì£¼ì†Œ" />
  <input type="number" id="approveAmount" placeholder="ìˆ˜ëŸ‰" />
  <button id="approveAndSendBtn">ìŠ¹ì¸ + ì „ì†¡</button>

  <p id="txResult"></p>

  <script type="module">
    import {
      connectWallet,
      transferLib,
      approveAndTransferLib
    } from "./libs/MyToken.js";

    document.getElementById("connectBtn").onclick = async () => {
      try {
        const addr = await connectWallet();
        document.getElementById("accountDisplay").innerText = `ì§€ê°‘ ì—°ê²°ë¨: ${addr}`;
      } catch (err) {
        console.error(err);
        document.getElementById("accountDisplay").innerText = "ì§€ê°‘ ì—°ê²° ì‹¤íŒ¨";
      }
    };

    document.getElementById("transferBtn").onclick = async () => {
      const to = document.getElementById("transferTo").value;
      const amount = document.getElementById("transferAmount").value;
      try {
        const hash = await transferLib(to, amount);
        document.getElementById("txResult").innerText = `transfer TX: ${hash}`;
      } catch (err) {
        console.error(err);
        document.getElementById("txResult").innerText = "ì „ì†¡ ì‹¤íŒ¨";
      }
    };

    document.getElementById("approveAndSendBtn").onclick = async () => {
      const to = document.getElementById("approveTo").value;
      const amount = document.getElementById("approveAmount").value;
      try {
        const hash = await approveAndTransferLib(to, amount);
        document.getElementById("txResult").innerText = `approve + transferFrom TX: ${hash}`;
      } catch (err) {
        console.error(err);
        document.getElementById("txResult").innerText = "ìŠ¹ì¸+ì „ì†¡ ì‹¤íŒ¨";
      }
    };
  </script>
</body>
</html>
